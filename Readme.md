holinext
========


The cli uses date.nager.at to get the next holidays for a give country


# Solution

- use https://github.com/OpenAPITools/openapi-generator to generate the rust client
- use cargo workspace to divide the crate into sub-crates
- cli expect a cache location to make sure it doesnt write to arbitary locations
- cache expires after 24 hours.
- libs used
    - clap: cli bootstrapping
    - comfy-table: to display table
    - serde_\*: to deal with cache ser/de

# Usagse

`target/debug/holinext --help`
`target/debug/holinext --country DE --cache .`

#Docs 


## holinext/src/cache.rs


- CacheIO trait help abstract out IO. Helps mock out testing
- JsonCache is a trait over Vec<T> where T is PublicHolidayV3Dto but need not be limited to that structure and can be extended to anything that has JSON serde implemented
- JsonCache depends on OS support to guess cache expiry. it is based on metadata of the cache file
- a custom type CachePath is defined to make sure it was generated by JsonCache::path and thus is the full path to the key and not arbitrary location
- there `trace!` sprinkled everywhere, so `RUST_LOG=trace` is usefull
- One integreation test in in place which check of serde and loading of data.



# Missing bits
- limit result to 5 days
- current cache just merges the received data but does not get rid of old holidays. This would required parsing the data and getting rid of old data. One trick would be to always discard the cache once it is expired.
- There is a hacky assumption in JsonCache implementation. `day.date` received is never None. this is needed to merge the received data into the cache. If cache is always thrown away once it expires then this assumption would no longer be needed.
- Improvved error reporting 
- enhanced error handling, Currently the cli just bails out

